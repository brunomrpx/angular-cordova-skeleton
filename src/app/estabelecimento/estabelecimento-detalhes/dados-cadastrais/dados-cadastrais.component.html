<div class="panel panel-default panel-card dados-cadastrais" [class.content-opened]="collapseContent.contentOpened" *ngIf="estabelecimento">
  <div class="panel-heading">
    <div class="row">
      <div class="col-xs-9">
        <strong class="panel-card__title">{{ estabelecimento.nome }}</strong>
      </div>
      <div class="col-xs-3 text-center">
        <i class="fa fa-circle"
           [class.status--0]="estabelecimento.status === TIPO_STATUS.SEM_PRIMEIRO_USO"
           [class.status--1]="estabelecimento.status === TIPO_STATUS.ATIVO"
           [class.status--2]="estabelecimento.status === TIPO_STATUS.CANCELADO"
           [class.status--3]="estabelecimento.status === TIPO_STATUS.INATIVO"
           [class.status--4]="estabelecimento.status === TIPO_STATUS.SEM_MDC">
        </i>
        <p>{{ TIPO_STATUS_FORMATADO[estabelecimento.status] }}</p>
      </div>
    </div>
    <div class="row">
      <div class="col-xs-12 margin-bottom">
        <span class="">{{ representanteLegal?.nome }}</span>
        <span *ngIf="representanteLegal?.nome && estabelecimento.telefones?.length > 0"> / </span>
        <span class="" *ngIf="estabelecimento.telefones?.length > 0"> {{ estabelecimento.telefones[0].numero }}</span>
        <div class="dados-cadastrais__ultima-visita" *ngIf="estabelecimento.dataUltimaVisita">
          <span class="dados-cadastrais__ultima-visita-label text-uppercase">
            <strong>Última visita:</strong>
          </span>
          {{ estabelecimento.dataUltimaVisita|date:"dd/MM/yyyy" }}
        </div>
      </div>
      <div class="col-xs-6 ">
        <strong class="dados-cadastrais__titulo panel-card__title">CPNJ:</strong> {{ estabelecimento.CNPJ }}
      </div>
      <div class="col-xs-6">
        <strong class="dados-cadastrais__titulo panel-card__title">Código:</strong> {{ estabelecimento.codigo }}
      </div>
    </div>
  </div>
  <div class="panel-body padding-bottom-0">
    <div class="row">
      <div class="col-xs-12 dados-cadastrais__endereco">
        <i class="fa fa-map-marker pull-left dados-cadastrais__endereco-icone"></i>
        <p class="dados-cadastrais__endereco-dados pull-left">
          {{ estabelecimento.logradouro }}, {{ estabelecimento.numero}}, {{ estabelecimento.tipoLogradouro }} {{ estabelecimento.complemento }}<br>
          {{ estabelecimento.bairro }} / CEP: {{ estabelecimento.CEP }}<br>
          {{ estabelecimento.cidade }} ‐ {{ estabelecimento.UF }}
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-xs-8">
        <div class="dados-cadastrais__titulo panel-card__title">
          <strong>Segmentos:</strong>
        </div>
        {{ estabelecimento.segmento }}
      </div>
      <div class="col-xs-4">
        <div class="dados-cadastrais__titulo panel-card__title">
          <strong>Grupo:</strong>
        </div>
        {{ estabelecimento.grupo ? estabelecimento.grupo : '-' }}
      </div>
    </div>
    <app-collapse-content #collapseContent reverseContent="true">
      <div class="title">
        <div class="row header-divider header-divider--3 margin-top">
          <div class="col-xs-12">
            {{ collapseContent.contentOpened ? 'Esconder' : 'Ver' }} <strong>detalhes</strong>
          </div>
        </div>
      </div>
      <div class="content">
        <div class="row margin-top">
          <div class="col-xs-12">
            <div class="dados-cadastrais__titulo panel-card__title">
              <strong>Número ECs no Grupo:</strong>
            </div>
            {{ estabelecimento.numeroECsGrupo }}
          </div>
        </div>
        <div class="row">
          <div class="col-xs-5 text-secondary">
            <div class="dados-cadastrais__titulo panel-card__title">
              <strong>Ramo: </strong>
            </div>
            {{ estabelecimento.ramo }}
          </div>
          <div class="col-xs-7 text-secondary">
            <div class="dados-cadastrais__titulo panel-card__title">
              <strong>Tipo: </strong>
            </div>
            {{ estabelecimento.tipo }}
          </div>
        </div>
        <div class="row">
          <div class="col-xs-12 text-secondary">
            <div class="dados-cadastrais__titulo panel-card__title">
              <strong>Sub-ramo: </strong>
            </div>
            {{ estabelecimento.subRamo }}
          </div>
        </div>
        <div class="row margin-top">
          <div class="col-xs-8">
            <strong class="dados-cadastrais__titulo panel-card__title">Correntista:</strong>
          </div>
          <div class="col-xs-4">
            <strong class="dados-cadastrais__titulo panel-card__title">Agência:</strong>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-8">{{ estabelecimento.correntista ? 'Sim' : 'Não' }}</div>
          <div class="col-xs-4">{{ estabelecimento.agencia ? estabelecimento.agencia : '-' }}</div>
        </div>
        <div class="row margin-top">
          <div class="col-xs-12">
            <div class="dados-cadastrais__titulo panel-card__title">
              <strong >Regional:</strong>
            </div>
            {{ estabelecimento.regional }}
          </div>
        </div>
        <div class="row margin-top">
          <div class="col-xs-5" *ngIf="estabelecimento?.telefones.length > 0">
            <div>
              <strong class="dados-cadastrais__titulo panel-card__title">Telefones:</strong>
            </div>
            <div *ngFor="let telefone of estabelecimento.telefones">
              {{ telefone.numero }}
            </div>
          </div>
          <div class="col-xs-7">
            <div class="dados-cadastrais__titulo panel-card__title">
              <strong>Data credenciamento</strong>
            </div>
            {{ estabelecimento.dataCredenciamento|date:"dd/MM/yyyy" }}
            <div class="padding-top dados-cadastrais__titulo panel-card__title">
              <strong>E-mail</strong>
            </div>
            {{ estabelecimento.emailCadastrado }}
          </div>
        </div>
        <div class="row margin-top dados-cadastrais__responsaveis-cabecalho">
          <div class="col-xs-6">
            <strong class="dados-cadastrais__titulo panel-card__title">Responsável</strong>
          </div>
          <div class="col-xs-6 text-right">
            <strong class="dados-cadastrais__titulo panel-card__title">Tipo</strong>
          </div>
        </div>
        <div class="row panel-card__item" [class.bottom-dotted]="!isLast" *ngFor="let responsavel of estabelecimento.responsaveis; let isLast = last">
          <div class="col-xs-6 text-uppercase">{{ responsavel.nome }}</div>
          <div class="col-xs-6 text-right text-secondary">{{ TIPO_RESPONSAVEL_FORMATADO[responsavel.tipo] }}</div>
        </div>
      </div>
    </app-collapse-content>
  </div>
</div>
